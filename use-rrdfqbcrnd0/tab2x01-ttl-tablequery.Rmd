--
title: "Create TAB1X02_1 as RDF data cube"
author: "mja@statgroup.dk"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    theme: united
  pdf_document:
    toc: true
    highlight: zenburn
  md_document:
    variant: markdown_github
---

# Introduction
This script creates RDF data cubes from .csv files.

# Setup

All files are stored in the directory
```{r}
targetName<- "TAB2X01"
(targetName)
targetDir<- "../res-ttl"
(targetDir)
targetFile<- file.path(targetDir, paste("CDISC-pilot-", targetName, ".ttl", sep=""))
(targetFile)
targetObsrqFile<- file.path(targetDir, paste("CDISC-pilot-", targetName, "-observations", ".rq", sep=""))
(targetObsrqFile)
```

```{r, child='include_ttl.Rmd'}
```

```{r}

z1prop<- c(
    )
z2prop<-
cube.observations.rq<-  paste( forsparqlprefix,
    "select * where {",
    "?s a qb:Observation  ;", 
    paste0( "    ", "qb:dataSet",  " ", "ds:", "dataset", "-", domainName, " ;", collapse="\n"),
    paste0( "    ", dimensions, " ", sub("crnd-dimension:", "?", dimensions ), ";", collapse="\n"),
    paste0( "    ", attributes, " ", sub("crnd-attribute:", "?", attributes ), ";", collapse="\n"),
    "    crnd-measure:measure ?measure .      ",
    paste0( "optional{ ", sub("crnd-dimension:", "?", dimensions), " ",
           "skos:prefLabel",
           " ",
           sub("crnd-dimension:", "?", dimensions ), "value" ,
           " . ", "}", collapse="\n" 
           ),
    "} ",
    "order by ?s",
    "\n",
    sep="\n", collapse="\n"
   )
cube.observations.rq
```


